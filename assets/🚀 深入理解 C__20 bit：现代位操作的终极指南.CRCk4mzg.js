import{_ as u}from"./ValaxyMain.vue_vue_type_style_index_0_lang.DFb9w7ov.js";import"./chunks/@vueuse/motion.C4iw3cy7.js";import{e as c,u as g,a as E}from"./chunks/vue-router.DvtURh-Z.js";import{aa as y,ap as l,ag as a,af as i,ai as s,O as b,ab as F,a1 as C}from"./framework.Df4MB1Nj.js";import"./app.B5PQ4AiW.js";import"./chunks/dayjs.BldX5ftQ.js";import"./chunks/vue-i18n.DTr_Pz4Q.js";import"./chunks/pinia.CdN7aRhB.js";/* empty css                    */import"./chunks/nprogress.DxEoPAls.js";import"./YunComment.vue_vue_type_style_index_0_lang.DUVa9YZ7.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.BTp6pkla.js";import"./post.DUuqtmnx.js";const D=c("/posts/C++/🚀 深入理解 C++20 bit：现代位操作的终极指南",async n=>JSON.parse('{"title":"🚀 深入理解 C++20 bit：现代位操作的终极指南","description":"","frontmatter":{"title":"🚀 深入理解 C++20 bit：现代位操作的终极指南","math":true,"categories":"C++","cover":"https://ooo.0x0.ooo/2025/08/22/Ofd0vG.png","date":"2025-08-21 17:15:12"},"headers":[],"relativePath":"pages/posts/C++/🚀 深入理解 C++20 bit：现代位操作的终极指南.md","lastUpdated":1756002329000}'),{lazy:(n,h)=>n.name===h.name}),U={__name:"🚀 深入理解 C++20 bit：现代位操作的终极指南",setup(n,{expose:h}){const{data:e}=D(),d=E(),o=g(),k=Object.assign(o.meta.frontmatter||{},e.value?.frontmatter||{});return d.currentRoute.value.data=e.value,C("valaxy:frontmatter",k),globalThis.$frontmatter=k,h({frontmatter:{title:"🚀 深入理解 C++20 bit：现代位操作的终极指南",math:!0,categories:"C++",cover:"https://ooo.0x0.ooo/2025/08/22/Ofd0vG.png",date:"2025-08-21 17:15:12"}}),(t,r)=>{const p=u;return F(),y(p,{frontmatter:b(k)},{"main-content-md":l(()=>[...r[0]||(r[0]=[i("h2",{id:"📌-引言",tabindex:"-1"},[s("📌 引言 "),i("a",{class:"header-anchor",href:"#📌-引言","aria-label":'Permalink to "📌 引言"'},"​")],-1),i("p",null,[s("在系统编程、算法优化、哈希表、位图（"),i("code",null,"bitmap"),s("）、编码压缩等领域，"),i("strong",null,"位操作（bit manipulation）"),s(" 是提升性能的核心手段。长期以来，开发者依赖 "),i("code",null,"GCC"),s("/"),i("code",null,"Clang"),s(" 的 "),i("code",null,"`__builtin_`"),s(" 系列函数（如 "),i("code",null,"`__builtin_clz`"),s("、"),i("code",null,"`__builtin_popcount`"),s("）来实现高效位运算。")],-1),i("p",null,[s("但这些函数存在"),i("strong",null,[s("可移植性差、对输入 "),i("code",null,"$0$"),s(" 行为未定义、语义不清晰")]),s("等问题。")],-1),i("p",null,[s("C++20 引入了 "),i("code",null,"<bit>"),s(" 头文件，为这些问题提供了"),i("strong",null,"现代化、安全、可移植、语义明确"),s("的解决方案。")],-1),i("p",null,[s("本文将带你"),i("strong",null,[s("全面掌握 "),i("code",null,"<bit>"),s(" 的所有函数")]),s("，理解其设计哲学、使用场景与最佳实践。")],-1),i("hr",null,null,-1),i("h2",{id:"📦-1-bit-是什么",tabindex:"-1"},[s("📦 1. "),i("code",null,"<bit>"),s(" 是什么？ "),i("a",{class:"header-anchor",href:"#📦-1-bit-是什么","aria-label":'Permalink to "📦 1. `<bit>` 是什么？"'},"​")],-1),i("p",null,[i("code",null,"<bit>"),s(" 是 C++20 标准新增的头文件，提供了一组 "),i("strong",null,[i("code",null,"constexpr"),s("、类型安全、跨平台")]),s(" 的位操作函数。")],-1),i("p",null,[s("它取代了传统 "),i("code",null,"`__builtin_`"),s(" 函数的“黑盒”特性，提供了：")],-1),i("ul",null,[i("li",null,"✅ 明确的语义命名"),i("li",null,[s("✅ 对 "),i("code",null,"$x=0$"),s(" 的安全处理")]),i("li",null,[s("✅ 支持编译期计算（"),i("code",null,"constexpr"),s("）")]),i("li",null,[s("✅ 跨编译器兼容（"),i("code",null,"GCC"),s("、"),i("code",null,"Clang"),s("、"),i("code",null,"MSVC"),s("）")]),i("li",null,[s("✅ 与硬件指令无缝对接，性能不输 "),i("code",null,"`__builtin_`")])],-1),i("blockquote",null,[i("p",null,[s("✅ "),i("strong",null,"要求"),s("：C++20 编译器（"),i("code",null,"GCC"),s(),i("code",null,"$10+$"),s("、"),i("code",null,"Clang"),s(),i("code",null,"$10+$"),s("、"),i("code",null,"MSVC"),s(),i("code",null,"$19.29+$"),s("）")])],-1),i("hr",null,null,-1),i("h2",{id:"🔧-2-所有-bit-函数一览",tabindex:"-1"},[s("🔧 2. 所有 "),i("code",null,"<bit>"),s(" 函数一览 "),i("a",{class:"header-anchor",href:"#🔧-2-所有-bit-函数一览","aria-label":'Permalink to "🔧 2. 所有 `<bit>` 函数一览"'},"​")],-1),i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"函数"),i("th",null,"功能")])]),i("tbody",null,[i("tr",null,[i("td",null,[i("code",null,"countl_zero(T x)")]),i("td",null,"前导零个数（从最高位开始）")]),i("tr",null,[i("td",null,[i("code",null,"countl_one(T x)")]),i("td",null,"前导一个数")]),i("tr",null,[i("td",null,[i("code",null,"countr_zero(T x)")]),i("td",null,"后缀零个数（从最低位开始）")]),i("tr",null,[i("td",null,[i("code",null,"countr_one(T x)")]),i("td",null,"后缀一个数")]),i("tr",null,[i("td",null,[i("code",null,"popcount(T x)")]),i("td",null,[s("二进制中 "),i("code",null,"$1$"),s(" 的个数")])]),i("tr",null,[i("td",null,[i("code",null,"bit_width(T x)")]),i("td",null,[s("表示 "),i("code",null,"x"),s(" 所需的最少位数")])]),i("tr",null,[i("td",null,[i("code",null,"bit_floor(T x)")]),i("td",null,[s("不大于 "),i("code",null,"x"),s(" 的最大 "),i("code",null,"$2$"),s(" 的幂")])]),i("tr",null,[i("td",null,[i("code",null,"bit_ceil(T x)")]),i("td",null,[s("不小于 "),i("code",null,"x"),s(" 的最小 "),i("code",null,"$2$"),s(" 的幂")])]),i("tr",null,[i("td",null,[i("code",null,"has_single_bit(T x)")]),i("td",null,[s("是否是 "),i("code",null,"$2$"),s(" 的幂（仅一个 "),i("code",null,"bit"),s(" 为 "),i("code",null,"$1$"),s("）")])]),i("tr",null,[i("td",null,[i("code",null,"rotl(T x, int s)")]),i("td",null,"循环左移")]),i("tr",null,[i("td",null,[i("code",null,"rotr(T x, int s)")]),i("td",null,"循环右移")])])],-1),i("blockquote",null,[i("p",null,[s("⚠️ "),i("strong",null,"所有函数仅接受无符号整数类型"),s("（如 "),i("code",null,"uint32_t"),s(", "),i("code",null,"unsigned long long"),s("），传入有符号类型是 "),i("strong",null,"未定义行为（UB）"),s("。")])],-1),i("hr",null,null,-1),i("h2",{id:"🔍-3-详细函数解析",tabindex:"-1"},[s("🔍 3. 详细函数解析 "),i("a",{class:"header-anchor",href:"#🔍-3-详细函数解析","aria-label":'Permalink to "🔍 3. 详细函数解析"'},"​")],-1),i("h3",{id:"_3-1-countl-zero-x-—-前导零",tabindex:"-1"},[s("3.1 "),i("code",null,"countl_zero(x)"),s(" — 前导零 "),i("a",{class:"header-anchor",href:"#_3-1-countl-zero-x-—-前导零","aria-label":'Permalink to "3.1 `countl_zero(x)` — 前导零"'},"​")],-1),i("p",null,[s("计算从最高位开始的连续 "),i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("semantics",null,[i("mrow",null,[i("mn",null,"0")]),i("annotation",{encoding:"application/x-tex"},"0")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6444em"}}),i("span",{class:"mord"},"0")])])]),s(" 的个数。")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," countl_zero"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"0b"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0000'1010'0000'0000"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 输出 12")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," countl_zero"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 输出 32（安全！）")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,[s("✅ "),i("strong",null,[s("对比 "),i("code",null,"`__builtin_clz(0)`"),s("：UB，而 "),i("code",null,"countl_zero(0)"),s(" 安全返回位数。")])],-1),i("hr",null,null,-1),i("h3",{id:"_3-2-countr-zero-x-—-后缀零",tabindex:"-1"},[s("3.2 "),i("code",null,"countr_zero(x)"),s(" — 后缀零 "),i("a",{class:"header-anchor",href:"#_3-2-countr-zero-x-—-后缀零","aria-label":'Permalink to "3.2 `countr_zero(x)` — 后缀零"'},"​")],-1),i("p",null,[s("计算从最低位开始的连续 "),i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("semantics",null,[i("mrow",null,[i("mn",null,"0")]),i("annotation",{encoding:"application/x-tex"},"0")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6444em"}}),i("span",{class:"mord"},"0")])])]),s(" 的个数（即 "),i("code",null,"ctz"),s("）。")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," countr_zero"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 8 = 1000₂ → 输出 3")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," countr_zero"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 输出 32（安全）")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,[s("✅ "),i("strong",null,[s("对比 "),i("code",null,"`__builtin_ctz(0)`"),s("：UB")])],-1),i("hr",null,null,-1),i("h3",{id:"_3-3-popcount-x-—-1-的个数",tabindex:"-1"},[s("3.3 "),i("code",null,"popcount(x)"),s(" — 1 的个数 "),i("a",{class:"header-anchor",href:"#_3-3-popcount-x-—-1-的个数","aria-label":'Permalink to "3.3 `popcount(x)` — 1 的个数"'},"​")],-1),i("p",null,[s("计算二进制中 "),i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("semantics",null,[i("mrow",null,[i("mn",null,"1")]),i("annotation",{encoding:"application/x-tex"},"1")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6444em"}}),i("span",{class:"mord"},"1")])])]),s(" 的个数。")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," popcount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"0b"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1011"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 输出 3")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," popcount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"      // 输出 0")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,[s("等价于 "),i("code",null,"`__builtin_popcount(x)`"),s("，但更安全可移植。")],-1),i("hr",null,null,-1),i("h3",{id:"_3-4-bit-width-x-—-最小表示位数",tabindex:"-1"},[s("3.4 "),i("code",null,"bit_width(x)"),s(" — 最小表示位数 "),i("a",{class:"header-anchor",href:"#_3-4-bit-width-x-—-最小表示位数","aria-label":'Permalink to "3.4 `bit_width(x)` — 最小表示位数"'},"​")],-1),i("p",null,[s("返回能表示 "),i("code",null,"x"),s(" 的最少位数（即 "),i("code",null,"$floor(log_2(x)) + 1$"),s("）。")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_width"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_width"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_width"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"7"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 3")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_width"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 4")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,[s("📌 实现："),i("code",null,"bit_width(x) = x ? digits - countl_zero(x) : 0")],-1),i("hr",null,null,-1),i("h3",{id:"_3-5-bit-floor-x-—-小于等于-x-的最大-2-的幂",tabindex:"-1"},[s("3.5 "),i("code",null,"bit_floor(x)"),s(" — 小于等于 x 的最大 2 的幂 "),i("a",{class:"header-anchor",href:"#_3-5-bit-floor-x-—-小于等于-x-的最大-2-的幂","aria-label":'Permalink to "3.5 `bit_floor(x)` — 小于等于 x 的最大 2 的幂"'},"​")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_floor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 4")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_floor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 8")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_floor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 0")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"📌 常用于哈希表扩容、内存对齐。",-1),i("hr",null,null,-1),i("h3",{id:"_3-6-bit-ceil-x-—-大于等于-x-的最小-2-的幂",tabindex:"-1"},[s("3.6 "),i("code",null,"bit_ceil(x)"),s(" — 大于等于 x 的最小 2 的幂 "),i("a",{class:"header-anchor",href:"#_3-6-bit-ceil-x-—-大于等于-x-的最小-2-的幂","aria-label":'Permalink to "3.6 `bit_ceil(x)` — 大于等于 x 的最小 2 的幂"'},"​")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_ceil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 8")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_ceil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 8")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_ceil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 1（注意！）")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("blockquote",null,[i("p",null,[s("⚠️ 如果结果溢出（如 "),i("code",null,"bit_ceil(1ULL << 63)"),s(" 在 "),i("code",null,"$64$"),s(" 位系统），行为未定义。")])],-1),i("hr",null,null,-1),i("h3",{id:"_3-7-has-single-bit-x-—-是否是-2-的幂",tabindex:"-1"},[s("3.7 "),i("code",null,"has_single_bit(x)"),s(" — 是否是 2 的幂 "),i("a",{class:"header-anchor",href:"#_3-7-has-single-bit-x-—-是否是-2-的幂","aria-label":'Permalink to "3.7 `has_single_bit(x)` — 是否是 2 的幂"'},"​")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," has_single_bit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // true")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," has_single_bit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"7"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // false")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," has_single_bit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"u"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // false")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,[s("等价于："),i("code",null,"x != 0 && (x & (x - 1)) == 0")],-1),i("hr",null,null,-1),i("h3",{id:"_3-8-rotl-x-s-与-rotr-x-s-—-循环移位",tabindex:"-1"},[s("3.8 "),i("code",null,"rotl(x, s)"),s(" 与 "),i("code",null,"rotr(x, s)"),s(" — 循环移位 "),i("a",{class:"header-anchor",href:"#_3-8-rotl-x-s-与-rotr-x-s-—-循环移位","aria-label":'Permalink to "3.8 `rotl(x, s)` 与 `rotr(x, s)` — 循环移位"'},"​")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rotl"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"0b"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1001"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 0b0011")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rotr"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"0b"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1001"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 0b1100")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"cout "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rotl"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"0b"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1001"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 等价于 rotr")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,"模位宽移位，避免越界。",-1),i("hr",null,null,-1),i("h2",{id:"⚙️-4-与-builtin-的对比",tabindex:"-1"},[s("⚙️ 4. 与 "),i("code",null,"__builtin_"),s(" 的对比 "),i("a",{class:"header-anchor",href:"#⚙️-4-与-builtin-的对比","aria-label":'Permalink to "⚙️ 4. 与 `__builtin_` 的对比"'},"​")],-1),i("table",null,[i("thead",null,[i("tr",null,[i("th",null,[i("code",null,"<bit>"),s(" 函数")]),i("th",null,[s("等价 "),i("code",null,"`__builtin_`")]),i("th",null,"优势")])]),i("tbody",null,[i("tr",null,[i("td",null,[i("code",null,"countl_zero(x)")]),i("td",null,[i("code",null,"`__builtin_clz(x)`")]),i("td",null,[s("安全处理 "),i("code",null,"$x=0$")])]),i("tr",null,[i("td",null,[i("code",null,"countr_zero(x)")]),i("td",null,[i("code",null,"`__builtin_ctz(x)`")]),i("td",null,[s("安全处理 "),i("code",null,"$x=0$")])]),i("tr",null,[i("td",null,[i("code",null,"popcount(x)")]),i("td",null,[i("code",null,"`__builtin_popcount(x)`")]),i("td",null,"更可移植")]),i("tr",null,[i("td",null,[i("code",null,"rotl(x,s)")]),i("td",null,"无直接对应"),i("td",null,"提供标准接口")])])],-1),i("blockquote",null,[i("p",null,[s("✅ "),i("strong",null,"性能"),s("：在支持 "),i("code",null,"BMI1"),s(" / "),i("code",null,"SSE4.2"),s(" / "),i("code",null,"ARMv8"),s(" 的 CPU 上，编译为单条指令（"),i("code",null,"LZCNT"),s(", "),i("code",null,"POPCNT"),s("），性能与 "),i("code",null,"`__builtin_`"),s(),i("strong",null,"完全相同"),s("。")])],-1),i("hr",null,null,-1),i("h2",{id:"⏱️-5-时间复杂度-全部-o-1",tabindex:"-1"},[s("⏱️ 5. 时间复杂度：全部 O(1) "),i("a",{class:"header-anchor",href:"#⏱️-5-时间复杂度-全部-o-1","aria-label":'Permalink to "⏱️ 5. 时间复杂度：全部 O(1)"'},"​")],-1),i("p",null,[s("所有 "),i("code",null,"<bit>"),s(" 函数的时间复杂度都是 "),i("strong",null,[i("code",null,"$O(1)$")]),s("，原因：")],-1),i("ol",null,[i("li",null,[i("strong",null,"输入位宽固定"),s("："),i("code",null,"uint32_t"),s(" 是 "),i("code",null,"$32$"),s(" 位，"),i("code",null,"uint64_t"),s(" 是 "),i("code",null,"$64$"),s(" 位 → 操作步数恒定。")]),i("li",null,[i("strong",null,"硬件指令支持"),s("：现代 CPU 有专用指令（如 "),i("code",null,"POPCNT"),s("），单周期完成。")]),i("li",null,[i("strong",null,[s("软件 fallback 也是 "),i("code",null,"$O(1)$")]),s("：即使无硬件支持，编译器使用查表、位并行算法（如 Hacker’s Delight），步数仍为常数。")])],-1),i("p",null,[s("📌 例如 "),i("code",null,"popcount"),s(" 的经典实现：")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," 0x"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"55555555"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ((n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">>"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," 0x"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"55555555"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," 0x"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"33333333"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ((n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">>"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," 0x"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"33333333"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," 0x"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0F0F0F0F"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ((n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">>"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," 0x"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0F0F0F0F"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," 0x"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"01010101"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">>"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 24"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("hr",null,null,-1),i("h2",{id:"⚠️-6-重要限制-必须传无符号整数",tabindex:"-1"},[s("⚠️ 6. 重要限制：必须传无符号整数！ "),i("a",{class:"header-anchor",href:"#⚠️-6-重要限制-必须传无符号整数","aria-label":'Permalink to "⚠️ 6. 重要限制：必须传无符号整数！"'},"​")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"popcount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x);"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // ❌ 未定义行为（UB）！")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h3",{id:"✅-正确做法",tabindex:"-1"},[s("✅ 正确做法： "),i("a",{class:"header-anchor",href:"#✅-正确做法","aria-label":'Permalink to "✅ 正确做法："'},"​")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"uint32_t"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"popcount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x);"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // ✅ 正确")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 处理有符号数的位模式？")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"uint32_t"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," u "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," static_cast<uint32_t>"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(a);"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 补码解释为无符号")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"popcount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(u);"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // 输出 32")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("p",null,[s("或使用 "),i("code",null,"bit_cast"),s("（C++20）：")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"auto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," u "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_cast"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"uint32_t"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">(a);")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("hr",null,null,-1),i("h2",{id:"🛠️-7-实用技巧与场景",tabindex:"-1"},[s("🛠️ 7. 实用技巧与场景 "),i("a",{class:"header-anchor",href:"#🛠️-7-实用技巧与场景","aria-label":'Permalink to "🛠️ 7. 实用技巧与场景"'},"​")],-1),i("h3",{id:"场景-1-判断是否为-2-的幂",tabindex:"-1"},[s("场景 1：判断是否为 2 的幂 "),i("a",{class:"header-anchor",href:"#场景-1-判断是否为-2-的幂","aria-label":'Permalink to "场景 1：判断是否为 2 的幂"'},"​")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"has_single_bit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n)) {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 是 2 的幂")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h3",{id:"场景-2-哈希表扩容",tabindex:"-1"},[s("场景 2：哈希表扩容 "),i("a",{class:"header-anchor",href:"#场景-2-哈希表扩容","aria-label":'Permalink to "场景 2：哈希表扩容"'},"​")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"size_t"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," new_cap "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_ceil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(desired);")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h3",{id:"场景-3-计算-log-2-n",tabindex:"-1"},[s("场景 3：计算 "),i("code",null,"$log_2(n)$"),s(),i("a",{class:"header-anchor",href:"#场景-3-计算-log-2-n","aria-label":'Permalink to "场景 3：计算 `$log_2(n)$`"'},"​")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," log2n "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_width"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," // n > 0")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("h3",{id:"场景-4-快速对齐",tabindex:"-1"},[s("场景 4：快速对齐 "),i("a",{class:"header-anchor",href:"#场景-4-快速对齐","aria-label":'Permalink to "场景 4：快速对齐"'},"​")],-1),i("div",{class:"language-cpp"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"cpp"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"size_t"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," aligned "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bit_ceil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(size);")])])]),i("button",{class:"code-block-unfold-btn"})],-1),i("hr",null,null,-1),i("h2",{id:"✅-8-最佳实践",tabindex:"-1"},[s("✅ 8. 最佳实践 "),i("a",{class:"header-anchor",href:"#✅-8-最佳实践","aria-label":'Permalink to "✅ 8. 最佳实践"'},"​")],-1),i("ul",null,[i("li",null,[s("✅ 优先使用 "),i("code",null,"<bit>"),s(" 而非 "),i("code",null,"`__builtin_`"),s("（更安全、可移植）")]),i("li",null,[s("✅ 使用 "),i("code",null,"uint32_t"),s(", "),i("code",null,"uint64_t"),s(" 等明确无符号类型")]),i("li",null,[s("✅ 利用 "),i("code",null,"constexpr"),s(" 在编译期计算")]),i("li",null,[s("✅ 处理 "),i("code",null,"$0$"),s(" 时无需额外判断（"),i("code",null,"countl_zero(0)"),s(" 安全）")]),i("li",null,"✅ 在性能敏感代码中大胆使用（性能 ≈ 硬件指令）")],-1),i("hr",null,null,-1),i("h2",{id:"🏁-9-总结",tabindex:"-1"},[s("🏁 9. 总结 "),i("a",{class:"header-anchor",href:"#🏁-9-总结","aria-label":'Permalink to "🏁 9. 总结"'},"​")],-1),i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"特性"),i("th",null,"说明")])]),i("tbody",null,[i("tr",null,[i("td",null,[i("strong",null,"头文件")]),i("td",null,[i("code",null,"<bit>")])]),i("tr",null,[i("td",null,[i("strong",null,"C++ 标准")]),i("td",null,"C++20")]),i("tr",null,[i("td",null,[i("strong",null,"函数数量")]),i("td",null,[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("semantics",null,[i("mrow",null,[i("mn",null,"11")]),i("annotation",{encoding:"application/x-tex"},"11")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6444em"}}),i("span",{class:"mord"},"11")])])]),s(" 个")])]),i("tr",null,[i("td",null,[i("strong",null,"时间复杂度")]),i("td",null,[s("全部 "),i("code",null,"$O(1)$")])]),i("tr",null,[i("td",null,[i("strong",null,[s("是否 "),i("code",null,"constexpr")])]),i("td",null,"是")]),i("tr",null,[i("td",null,[i("strong",null,[s("是否处理 "),i("code",null,"$x=0$")])]),i("td",null,"是（明确定义）")]),i("tr",null,[i("td",null,[i("strong",null,"是否可移植")]),i("td",null,"高")]),i("tr",null,[i("td",null,[i("strong",null,"性能")]),i("td",null,[s("与 "),i("code",null,"`__builtin_`"),s(" 相当")])])])],-1),i("blockquote",null,[i("p",null,[i("strong",null,[i("code",null,"<bit>"),s(" 是现代 C++ 位操作的首选工具")]),s("。它不仅功能强大，而且安全、清晰、高效。")])],-1),i("hr",null,null,-1),i("h2",{id:"📚-参考资料",tabindex:"-1"},[s("📚 参考资料 "),i("a",{class:"header-anchor",href:"#📚-参考资料","aria-label":'Permalink to "📚 参考资料"'},"​")],-1),i("ul",null,[i("li",null,[i("a",{href:"https://en.cppreference.com/w/cpp/header/bit",target:"_blank",rel:"noreferrer"},[s("C++20 Standard: "),i("code",null,"<bit>")])]),i("li",null,"Hacker’s Delight, 2nd Edition"),i("li",null,"Intel Intrinsics Guide"),i("li",null,"GCC Built-in Functions")],-1),i("hr",null,null,-1),i("blockquote",null,[i("p",null,[s("💬 "),i("strong",null,"欢迎留言讨论"),s("：你在项目中用过 "),i("code",null,"<bit>"),s(" 吗？遇到过什么坑？"),i("br"),s(" 🔁 "),i("strong",null,"转发分享"),s("，让更多 C++ 开发者掌握现代位操作！")])],-1)])]),"main-header":l(()=>[a(t.$slots,"main-header")]),"main-header-after":l(()=>[a(t.$slots,"main-header-after")]),"main-nav":l(()=>[a(t.$slots,"main-nav")]),"main-content-before":l(()=>[a(t.$slots,"main-content-before")]),"main-content":l(()=>[a(t.$slots,"main-content")]),"main-content-after":l(()=>[a(t.$slots,"main-content-after")]),"main-nav-before":l(()=>[a(t.$slots,"main-nav-before")]),"main-nav-after":l(()=>[a(t.$slots,"main-nav-after")]),comment:l(()=>[a(t.$slots,"comment")]),footer:l(()=>[a(t.$slots,"footer")]),aside:l(()=>[a(t.$slots,"aside")]),"aside-custom":l(()=>[a(t.$slots,"aside-custom")]),default:l(()=>[a(t.$slots,"default")]),_:3},8,["frontmatter"])}}};export{U as default,D as usePageData};
