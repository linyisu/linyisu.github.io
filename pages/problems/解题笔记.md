---
title: è§£é¢˜ç¬”è®°
math: true
tags:
  - ç®—æ³•
categories:
  - é¢˜è§£
abbrlink: 14826
date: 2025-01-20 18:31:30
---

## [ç§æ ‘](https://www.acwing.com/problem/content/description/4171/)ã€è´ªå¿ƒã€‘

#### é¢˜ç›®æè¿°

æŸæ¡è¡—è¢«åˆ’ä¸º n æ¡è·¯æ®µï¼Œè¿™ n æ¡è·¯æ®µä¾æ¬¡ç¼–å·ä¸º 1â€¦nã€‚æ¯ä¸ªè·¯æ®µæœ€å¤šå¯ä»¥ç§ä¸€æ£µæ ‘ã€‚ç°åœ¨å±…æ°‘ä»¬ç»™å‡ºäº† h ç»„å»ºè®®ï¼Œæ¯ç»„å»ºè®®åŒ…å«ä¸‰ä¸ªæ•´æ•° b,e,tï¼Œè¡¨ç¤ºå±…æ°‘å¸Œæœ›åœ¨è·¯æ®µ b åˆ° eä¹‹é—´è‡³å°‘è¦ç§ t æ£µæ ‘ã€‚è¿™äº›å»ºè®®æ‰€ç»™è·¯æ®µçš„åŒºé—´å¯ä»¥äº¤å‰ã€‚è¯·é—®ï¼šå¦‚æœè¦æ»¡è¶³æ‰€æœ‰å±…æ°‘çš„å»ºè®®ï¼Œè‡³å°‘è¦ç§å¤šå°‘æ£µæ ‘ã€‚

#### è¾“å…¥æ ¼å¼

ç¬¬ä¸€è¡Œä¸º nï¼Œè¡¨ç¤ºè·¯æ®µæ•°ã€‚

ç¬¬äºŒè¡Œä¸º hï¼Œè¡¨ç¤ºå»ºè®®æ•°ã€‚

ä¸‹é¢ h è¡Œæè¿°ä¸€æ¡å»ºè®®ï¼šb,e,tï¼Œç”¨ä¸€ä¸ªç©ºæ ¼åˆ†éš”ã€‚

#### è¾“å‡ºæ ¼å¼

è¾“å‡ºåªæœ‰ä¸€ä¸ªæ•°ï¼Œä¸ºæ»¡è¶³æ‰€æœ‰å±…æ°‘çš„å»ºè®®ï¼Œæ‰€éœ€è¦ç§æ ‘çš„æœ€å°‘æ•°é‡ã€‚

#### æ ·ä¾‹

```
9
4
1 4 2
4 6 2
8 9 2
3 5 2
```

```
5
```

#### æ€è·¯

ä¸ºäº†ä½¿å¾—æœ€ç»ˆç§çš„æ ‘æ•°é‡æœ€å°ï¼Œå³å°½å¯èƒ½è®©æ ‘ç§åœ¨åŒºé—´é‡å å¤„ã€‚

å°†åŒºé—´æŒ‰ç…§ç»“å°¾æ’åºï¼Œæ¯æ¬¡ç§æ ‘åˆ¤æ–­å½“å‰åŒºé—´æ˜¯å¦å·²ç»æ»¡è¶³æ‰€éœ€æ•°é‡ï¼Œè‹¥è¶³å¤Ÿåˆ™è·³è¿‡ï¼Œå¦åˆ™ä»åå¾€å‰å¡«ç©ºç§æ ‘ã€‚

#### CODE

```c++
const int N = 3e4 + 10;
bool vis[N] = {false};
struct node 
{
    int b, e, t;
}p[N];
bool cmp(node x, node y) {return x.e < y.e;}

void solve()
{
    int n, h, ans = 0;
    cin >> n >> h;
    for (int i=0;i<h;i++)
        cin >> p[i].b >> p[i].e >> p[i].t;
    sort(p, p + h, cmp);
    for (int i=0;i<h;i++)
    {
        int cnt = 0, st = p[i].e;
        for (int j=p[i].e;j>=p[i].b;j--)
            cnt += vis[j];
        p[i].t -= cnt;
        while (p[i].t > 0)
        {
            if (!vis[st])
                vis[st] = true, p[i].t --;
            st --;
        }
    }
    for (int i=1;i<=n;i++)
        ans += vis[i];
    cout << ans;
}
```

## [å‡åˆ†çº¸ç‰Œ](https://www.luogu.com.cn/problem/P1031)ã€è´ªå¿ƒã€‘

#### é¢˜ç›®æè¿°

æœ‰$N$å †çº¸ç‰Œï¼Œç¼–å·åˆ†åˆ«ä¸º$1,2,\ldots,N$ã€‚æ¯å †ä¸Šæœ‰è‹¥å¹²å¼ ï¼Œä½†çº¸ç‰Œæ€»æ•°å¿…ä¸º$N$çš„å€æ•°ã€‚å¯ä»¥åœ¨ä»»ä¸€å †ä¸Šå–è‹¥å¹²å¼ çº¸ç‰Œï¼Œç„¶åç§»åŠ¨ã€‚

ç§»ç‰Œè§„åˆ™ä¸ºï¼šåœ¨ç¼–å·ä¸º$1$å †ä¸Šå–çš„çº¸ç‰Œï¼Œåªèƒ½ç§»åˆ°ç¼–å·ä¸º$2$çš„å †ä¸Šï¼›åœ¨ç¼–å·ä¸º$N$çš„å †ä¸Šå–çš„çº¸ç‰Œï¼Œåªèƒ½ç§»åˆ°ç¼–å·ä¸º$N-1$çš„å †ä¸Šï¼›å…¶ä»–å †ä¸Šå–çš„çº¸ç‰Œï¼Œå¯ä»¥ç§»åˆ°ç›¸é‚»å·¦è¾¹æˆ–å³è¾¹çš„å †ä¸Šã€‚

ç°åœ¨è¦æ±‚æ‰¾å‡ºä¸€ç§ç§»åŠ¨æ–¹æ³•ï¼Œç”¨æœ€å°‘çš„ç§»åŠ¨æ¬¡æ•°ä½¿æ¯å †ä¸Šçº¸ç‰Œæ•°éƒ½ä¸€æ ·å¤šã€‚

ä¾‹å¦‚$N=4$æ—¶ï¼Œ$4$å †çº¸ç‰Œæ•°åˆ†åˆ«ä¸º$9,8,17,6$ã€‚

ç§»åŠ¨$3$æ¬¡å¯è¾¾åˆ°ç›®çš„ï¼š

- ä»ç¬¬ä¸‰å †å–$4$å¼ ç‰Œæ”¾åˆ°ç¬¬å››å †ï¼Œæ­¤æ—¶æ¯å †çº¸ç‰Œæ•°åˆ†åˆ«ä¸º$9,8,13,10$ã€‚
- ä»ç¬¬ä¸‰å †å–$3$å¼ ç‰Œæ”¾åˆ°ç¬¬äºŒå †ï¼Œæ­¤æ—¶æ¯å †çº¸ç‰Œæ•°åˆ†åˆ«ä¸º$9,11,10,10$ã€‚
- ä»ç¬¬äºŒå †å–$1$å¼ ç‰Œæ”¾åˆ°ç¬¬ä¸€å †ï¼Œæ­¤æ—¶æ¯å †çº¸ç‰Œæ•°åˆ†åˆ«ä¸º $10,10,10,10$ã€‚

#### è¾“å…¥æ ¼å¼

ç¬¬ä¸€è¡Œå…±ä¸€ä¸ªæ•´æ•°$N$ï¼Œè¡¨ç¤ºçº¸ç‰Œå †æ•°ã€‚  
ç¬¬äºŒè¡Œå…±$N$ä¸ªæ•´æ•°$A_1,A_2,\ldots,A_N$ï¼Œè¡¨ç¤ºæ¯å †çº¸ç‰Œåˆå§‹æ—¶çš„çº¸ç‰Œæ•°ã€‚

#### è¾“å‡ºæ ¼å¼

å…±ä¸€è¡Œï¼Œå³æ‰€æœ‰å †å‡è¾¾åˆ°ç›¸ç­‰æ—¶çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°ã€‚

#### æ ·ä¾‹ #1

```
4
9 8 17 6
```

```
3
```

#### æç¤º

å¯¹äº$100\%$çš„æ•°æ®ï¼Œ$1  \le  N  \le  100$ï¼Œ$1 \le  A_i  \le 10000$ã€‚

#### æ€è·¯

å¯¹äºç¬¬ä¸€å †çº¸ç‰Œï¼Œåªèƒ½ç”±ç¬¬äºŒå †çº¸ç‰Œå¤šé€€å°‘è¡¥ï¼Œå› æ­¤è‹¥å…¶ä¸ä¸ºå¹³å‡æ•°ï¼Œè®¡æ•°å¹¶ä»ç¬¬äºŒå †ä¸­è§£å†³ã€‚

åœ¨ç¬¬ä¸€å †æ”¾ç½®å¥½åï¼Œå…¶ä¸ä¼šå¯¹å…¶ä»–å †ç‰Œé€ æˆå½±å“ï¼Œå› æ­¤å¯å°†å…¶â€œåˆ å»â€ï¼Œæ­¤æ—¶å¯å°†ç¬¬äºŒå †ç‰Œå½“æˆç¬¬ä¸€å †ç‰Œï¼ŒæŒ‰ç…§ä¸Šä¸€è¡Œæ–¹å¼å¤„ç†ã€‚

#### CODE

```c++
void solve()
{
    int n, sum = 0;
    cin >> n;
    vector<int> v(n + 1);
    for (int i=0;i<n;i++)
        cin >> v[i], sum += v[i];
    sum /= n;	// å¹³å‡æ•°
    
    int cnt = 0;
    for (int i=0;i<n;i++)
        if (v[i] != sum)
            v[i + 1] -= sum - v[i], cnt ++;
    cout << cnt;
}
```

## [æœ€å°æ‹¦æˆªç³»ç»Ÿ](https://vjudge.net/problem/HDU-1257)ã€è´ªå¿ƒã€äºŒåˆ†ã€‘

#### é¢˜ç›®æè¿°

æŸå›½ä¸ºäº†é˜²å¾¡æ•Œå›½çš„å¯¼å¼¹è¢­å‡»,å‘å±•å‡ºä¸€ç§å¯¼å¼¹æ‹¦æˆªç³»ç»Ÿ.ä½†æ˜¯è¿™ç§å¯¼å¼¹æ‹¦æˆªç³»ç»Ÿæœ‰ä¸€ä¸ªç¼ºé™·:è™½ç„¶å®ƒçš„ç¬¬ä¸€å‘ç‚®å¼¹èƒ½å¤Ÿåˆ°è¾¾ä»»æ„çš„é«˜åº¦,ä½†æ˜¯ä»¥åæ¯ä¸€å‘ç‚®å¼¹éƒ½ä¸èƒ½è¶…è¿‡å‰ä¸€å‘çš„é«˜åº¦.æŸå¤©,é›·è¾¾æ•æ‰åˆ°æ•Œå›½çš„å¯¼å¼¹æ¥è¢­.ç”±äºè¯¥ç³»ç»Ÿè¿˜åœ¨è¯•ç”¨é˜¶æ®µ,æ‰€ä»¥åªæœ‰ä¸€å¥—ç³»ç»Ÿ,å› æ­¤æœ‰å¯èƒ½ä¸èƒ½æ‹¦æˆªæ‰€æœ‰çš„å¯¼å¼¹.
æ€ä¹ˆåŠå‘¢?å¤šæå‡ å¥—ç³»ç»Ÿå‘—!ä½ è¯´è¯´å€’è›®å®¹æ˜“,æˆæœ¬å‘¢?æˆæœ¬æ˜¯ä¸ªå¤§é—®é¢˜å•Š.æ‰€ä»¥ä¿ºå°±åˆ°è¿™é‡Œæ¥æ±‚æ•‘äº†,è¯·å¸®åŠ©è®¡ç®—ä¸€ä¸‹æœ€å°‘éœ€è¦å¤šå°‘å¥—æ‹¦æˆªç³»ç»Ÿ.

#### è¾“å…¥æ ¼å¼

**è¾“å…¥è‹¥å¹²ç»„æ•°æ®**.æ¯ç»„æ•°æ®åŒ…æ‹¬:å¯¼å¼¹æ€»ä¸ªæ•°(æ­£æ•´æ•°),å¯¼å¼¹ä¾æ­¤é£æ¥çš„é«˜åº¦(é›·è¾¾ç»™å‡ºçš„é«˜åº¦æ•°æ®æ˜¯ä¸å¤§äº30000çš„æ­£æ•´æ•°,ç”¨ç©ºæ ¼åˆ†éš”)

#### è¾“å‡ºæ ¼å¼

å¯¹åº”æ¯ç»„æ•°æ®è¾“å‡ºæ‹¦æˆªæ‰€æœ‰å¯¼å¼¹æœ€å°‘è¦é…å¤‡å¤šå°‘å¥—è¿™ç§å¯¼å¼¹æ‹¦æˆªç³»ç»Ÿ.

#### æ ·ä¾‹

```
8 389 207 155 300 299 170 158 65
```

```
2
```

#### æ€è·¯

**å‘ç‚¹ï¼šæœ‰å¤šç»„æ•°æ®ï¼ï¼ï¼ï¼**

ä¸¤ç§æ–¹æ³•

1.è´ªå¿ƒ

å¯¹äºæ¯é¢—å¯¼å¼¹ï¼Œæ‰¾åˆ°å·²å­˜åœ¨ç³»ç»Ÿä¸­èƒ½å¤Ÿæ‹¦æˆªå…¶çš„ï¼Œæ‹¦æˆªå¹¶æ›´æ–°è¯¥ç³»ç»Ÿçš„å¯æ‹¦æˆªé‡ï¼Œè‹¥æœªæ‰¾åˆ°ï¼Œåˆ™æ–°å»ºä¸€ä¸ªç³»ç»Ÿï¼Œå¹¶æ›´æ–°ä¸ºå½“å‰å¯¼å¼¹é«˜åº¦ã€‚

2.è´ªå¿ƒ + äºŒåˆ†

å¯¹äºæ¯é¢—å¯¼å¼¹ï¼ŒäºŒåˆ†å·²å­˜åœ¨ç³»ç»Ÿçš„æœ€å°çš„å¯æ‹¦æˆªç³»ç»Ÿï¼Œæ‹¦æˆªå¹¶æ›´æ–°è¯¥ç³»ç»Ÿçš„å¯æ‹¦æˆªé‡ï¼Œè‹¥æœªæ‰¾åˆ°ï¼Œåˆ™æ–°å»ºä¸€ä¸ªç³»ç»Ÿï¼Œå¹¶æ›´æ–°ä¸ºå½“å‰å¯¼å¼¹é«˜åº¦ã€‚

#### CODE

```c++
void solve()    // è´ªå¿ƒ + äºŒåˆ† O(nlogn)
{
    int n;
    while (cin >> n)
    {
        vector<int> v(n);
        for (auto &x : v)   cin >> x;
        vector<int> a;
        for (auto x : v)
        {
            auto it = lower_bound(all(a), x);
            if (it != a.end())  *it = x;
            else    a.push_back(x);
        }
        cout << a.size() << _endl;
    }
}
```

```c++
void solve()    // è´ªå¿ƒ O(n ^ 2)
{
    int n;
    while (cin >> n)
    {
        vector<int> v(n);
        for (auto &x : v)   cin >> x;
        vector<int> a;
        for (auto x : v)
        {
            bool ok = false;
            for (auto &cur : a)
                if (cur >= x)
                {
                    cur = x;
                    ok = true;
                    break;
                }
            if (!ok)    a.push_back(x);
        }
        cout << a.size() << _endl;
    }
}
```

## [åˆå”±é˜Ÿå½¢](https://www.luogu.com.cn/problem/P1091)ã€dpã€‘

#### é¢˜ç›®æè¿°

$n$ä½åŒå­¦ç«™æˆä¸€æ’ï¼ŒéŸ³ä¹è€å¸ˆè¦è¯·å…¶ä¸­çš„$n-k$ä½åŒå­¦å‡ºåˆ—ï¼Œä½¿å¾—å‰©ä¸‹çš„$k$ä½åŒå­¦æ’æˆåˆå”±é˜Ÿå½¢ã€‚

åˆå”±é˜Ÿå½¢æ˜¯æŒ‡è¿™æ ·çš„ä¸€ç§é˜Ÿå½¢ï¼šè®¾$k$ä½åŒå­¦ä»å·¦åˆ°å³ä¾æ¬¡ç¼–å·ä¸º$1,2,$â€¦$,k$ï¼Œä»–ä»¬çš„èº«é«˜åˆ†åˆ«ä¸º$t_1,t_2,$â€¦$,t_k$ï¼Œåˆ™ä»–ä»¬çš„èº«é«˜æ»¡è¶³$t_1< \cdots <t_i>t_{i+1}>$â€¦$>t_k(1\le i\le k)$ã€‚

ä½ çš„ä»»åŠ¡æ˜¯ï¼Œå·²çŸ¥æ‰€æœ‰$n$ä½åŒå­¦çš„èº«é«˜ï¼Œè®¡ç®—æœ€å°‘éœ€è¦å‡ ä½åŒå­¦å‡ºåˆ—ï¼Œå¯ä»¥ä½¿å¾—å‰©ä¸‹çš„åŒå­¦æ’æˆåˆå”±é˜Ÿå½¢ã€‚

#### è¾“å…¥æ ¼å¼

å…±äºŒè¡Œã€‚

ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•°$n$ï¼ˆ$2\le n\le100$ï¼‰ï¼Œè¡¨ç¤ºåŒå­¦çš„æ€»æ•°ã€‚

ç¬¬äºŒè¡Œæœ‰$n$ä¸ªæ•´æ•°ï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼Œç¬¬$i$ä¸ªæ•´æ•°$t_i$ï¼ˆ$130\le t_i\le230$ï¼‰æ˜¯ç¬¬$i$ä½åŒå­¦çš„èº«é«˜ï¼ˆå˜ç±³ï¼‰ã€‚

#### è¾“å‡ºæ ¼å¼

ä¸€ä¸ªæ•´æ•°ï¼Œæœ€å°‘éœ€è¦å‡ ä½åŒå­¦å‡ºåˆ—ã€‚

#### æ ·ä¾‹

```
8
186 186 150 200 160 130 197 220
```

```
4
```

#### æç¤º

å¯¹äº$50\%$çš„æ•°æ®ï¼Œä¿è¯æœ‰$n \le 20$ã€‚

å¯¹äºå…¨éƒ¨çš„æ•°æ®ï¼Œä¿è¯æœ‰$n \le 100$ã€‚

#### æ€è·¯

åˆ†åˆ«ä»ä¸¤è¾¹è¿›è¡Œä¸€æ¬¡DPæ±‚æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œåˆ—å‡ºä¸¤ä¸ªDPæ•°ç»„å¯ä»¥å‘ç°

```
// å¯¹æ ·ä¾‹è¿›è¡Œè§£é‡Š
f[i]   1 1 1 2 2 1 3 4 
g[i]   3 3 2 3 2 1 1 1
f+g-1  3 3 2 4 3 1 3 4
```

f[i] + g[i] - 1å³ä¸ºä»¥ v[i] ä¸ºä¸­å¿ƒï¼Œèƒ½æ»¡è¶³é¢˜ç›®æ¡ä»¶çš„æœ€é•¿åºåˆ—é•¿åº¦ã€‚

å› æ­¤ï¼Œéå†ä¸€æ¬¡ï¼Œæ‰¾åˆ°æœ€å¤§å€¼ mx ï¼Œn - mx ä¸ºæ‰€æ±‚ã€‚

#### CODE

```cpp
void solve()
{
    int n;  cin >> n;
    vector<int> v(n), f(n, 1), g(n, 1);
    for (auto &x : v)   cin >> x;
    
    for (int i=0;i<n;i++)
        for (int j=0;j<i;j++)
            if (v[i] > v[j])
                f[i] = max(f[i], f[j] + 1);

    for (int i=n-1;i>=0;i--)
        for (int j=n-1;j>i;j--)
            if (v[i] > v[j])
                g[i] = max(g[i], g[j] + 1);

    int ans = ll_MAX - 1;
    for (int i=0;i<n;i++)
        ans = min(ans, n - f[i] - g[i] + 1);
    cout << ans;
}
```



## [Invoking the Magic](https://codeforces.com/gym/102770/problem/I)ã€å¹¶æŸ¥é›†+ç¦»æ•£åŒ–ã€‘

#### é¢˜ç›®æè¿°

BaoBaoæ˜¯ä¸€ä¸ªæ‡’æƒ°çš„ç”·å­©ã€‚ä»–æœ‰*n*åŒä¸åŒé¢œè‰²çš„è¢œå­ï¼Œæ¯ä¸ªæœˆéƒ½ä¼šæ´—ä¸€æ¬¡ã€‚åœ¨æ´—è¡£æœºé‡Œï¼Œè¿™äº›è¢œå­ä¼šè¢«æ··åœ¨ä¸€èµ·ã€‚

å› ä¸ºæœ‰å¤ªå¤šéœ€è¦é…å¯¹çš„è¢œå­ï¼ŒBaoBaoå°†æ•´ä¸ªè¢œå­é…å¯¹è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µã€‚

åœ¨ç¬¬ä¸€é˜¶æ®µï¼ŒBaoBaoéšæœºåœ°å°†è¢œå­é…å¯¹ã€‚ç„¶ååœ¨ç¬¬äºŒé˜¶æ®µï¼ŒBaoBaoé‡å¤ä»¥ä¸‹æ“ä½œï¼Œç›´åˆ°æ‰€æœ‰è¢œå­éƒ½é…å¯¹æˆåŠŸï¼šBaoBaoé€‰æ‹©ä¸€äº›è¢œå­çš„é…å¯¹ï¼ŒæŠŠå®ƒä»¬æ”¾å…¥ä»–çš„é­”æ³•æ´—æ¶¤ç›†ä¸­ï¼Œå¹¶æ–½å±•ä»–çš„é­”æ³•ã€‚å¦‚æœåœ¨ä½¿ç”¨é­”æ³•æ—¶ï¼Œé­”æ³•æ´—æ¶¤ç›†ä¸­çš„è¢œå­å¯ä»¥å®Œç¾é…å¯¹ï¼Œé‚£ä¹ˆé­”æ³•æ´—æ¶¤ç›†ä¼šè‡ªåŠ¨ä¸ºBaoBaoé…å¯¹å®ƒä»¬ã€‚ç„¶è€Œï¼Œå¦‚æœå®ƒä»¬ä¸èƒ½é…å¯¹ï¼ˆè¿™æ„å‘³ç€æ´—æ¶¤ç›†ä¸­è‡³å°‘æœ‰ä¸€åªé¢œè‰²ç‹¬ç‰¹çš„è¢œå­ï¼‰ï¼Œé­”æ³•ç›†ä¼šçˆ†ç‚¸ï¼Œè€ŒBaoBaoå¿…é¡»é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿã€‚

BaoBaoçš„é­”æ³•æ˜¯æœ‰é™çš„ï¼Œåœ¨ç¬¬ä¸€é˜¶æ®µä¹‹åï¼Œä»–éœ€è¦çŸ¥é“ä»–éœ€è¦æˆåŠŸé…å¯¹æ‰€æœ‰è¢œå­æ‰€éœ€çš„é­”æ³•æ´—æ¶¤ç›†çš„æœ€å°å®¹é‡ã€‚æ´—æ¶¤ç›†çš„å®¹é‡æ˜¯BaoBaoä¸€æ¬¡æœ€å¤šå¯ä»¥æ”¾å…¥çš„è¢œå­å¯¹æ•°ã€‚

#### è¾“å…¥æ ¼å¼

è¾“å…¥åŒ…å«å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•° $T$ ($1\leq T\leq 50$)ï¼Œè¡¨ç¤ºæµ‹è¯•ç”¨ä¾‹çš„æ•°é‡ã€‚

å¯¹äºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° $n$ ($1\leq n\leq10^5$)ï¼Œè¡¨ç¤ºè¢œå­å¯¹çš„æ•°é‡ã€‚

æ¥ä¸‹æ¥çš„ $n$ è¡Œï¼Œç¬¬ $i$ è¡Œï¼ˆ$1\leq i\leq n$ï¼‰åŒ…å«ä¸¤ä¸ªæ•´æ•° $a_i$ å’Œ $b_i$  ($1\leq a,\ b\leq 2^{30}$)ï¼Œè¡¨ç¤ºç¬¬ä¸€é˜¶æ®µåç¬¬ $i$ å¯¹è¢œå­çš„é¢œè‰²ã€‚ä¿è¯æ¯åªè¢œå­éƒ½æ°å¥½æœ‰ä¸€åªé¢œè‰²ç›¸åŒçš„è¢œå­ã€‚

#### è¾“å‡ºæ ¼å¼

å¯¹äºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¾“å‡ºä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé­”æ³•æ´—æ¶¤ç›†çš„æœ€å°å®¹é‡ã€‚

#### æ ·ä¾‹

```
1
5
1 2
2 3
1 3
4 5
4 5
```

```
3
```

#### æ³¨æ„

åœ¨ç¤ºä¾‹ä¸­ï¼ŒBaoBaoå¯ä»¥å…ˆæŠŠè¿™ä¸‰å¯¹è¢œå­æ”¾å…¥é­”æ³•æ´—æ¶¤ç›†ï¼š$\{1,2\}\{2,3\}\{1,3\}$ï¼Œç„¶åå®ƒä»¬å°†é…å¯¹æˆ $\{1,1\}\{2,2\}\{3,3\}$ ã€‚ç„¶åï¼Œä»–å¯ä»¥æŠŠ$\{4,5\}\{4,5\}$ æ”¾å…¥é­”æ³•æ´—æ¶¤ç›†ï¼Œå®ƒä»¬å°†é…å¯¹æˆ $\{4,4\}\{5,5\}$ ã€‚å› æ­¤ï¼Œå®¹é‡ä¸º $3$ æ—¶å¯ä»¥æˆåŠŸé…å¯¹æ‰€æœ‰è¢œå­ã€‚é€šè¿‡ç©·ä¸¾å¯ä»¥è¯æ˜ï¼Œå®¹é‡ä¸º $2$ æ—¶æ— æ³•æˆåŠŸé…å¯¹ã€‚

#### æ€è·¯

å•Šå“ˆï¼Œ è¿™é“é¢˜è®©æˆ‘ç¬¬ä¸€æ¬¡å°åˆ°äº†`#define int long long`çš„è‹¦æœï¼ï¼

**[å‹çº¿é€šè¿‡](https://codeforces.com/gym/102770/submission/301234077)**

é¢˜ç›®å…¶å®æŒºç®€å•çš„ï¼Œå°±æ˜¯å¹¶æŸ¥é›†æ±‚åˆå¹¶åå„ä¸ªé›†åˆä¸­å…ƒç´ çš„æœ€å¤§ä¸ªæ•°ã€‚ä½†åº”è¯¥æ³¨æ„åˆ°çš„æ˜¯ï¼Œè¢œå­çš„é¢œè‰²å¹¶éç”±1åˆ°nï¼Œå› æ­¤éœ€å¯¹å…¶è¿›è¡Œç¦»æ•£åŒ–ã€‚ï¼ˆä¼¼ä¹ä½¿ç”¨mapç¦»æ•£åŒ–çš„æ—¶é—´å¾ˆé•¿ï¼‰ã€‚æ­¤å¤–ï¼Œ findè¿‡ç¨‹ä¸­ï¼Œè¿˜éœ€è¦è¿›è¡Œè·¯å¾„å‹ç¼©ï¼Œå¦åˆ™ä¼šå¯¼è‡´å•æè¿‡é•¿ï¼ˆç±»ä¼¼é“¾è¡¨ï¼Ÿï¼ï¼ï¼‰ã€‚

#### CODE

```cpp
// ä¸å¯define int long long
struct DSU
{
    vector<int> f, siz;
    
    DSU() {}
    DSU(int n) {init(n);}
    
    void init(int n) 
    {
        f.resize(n + 1);
        iota(f.begin(), f.end(), 0);
        siz.assign(n + 1, 1);
    }
    
    int find(int x) 
    {
        if (x != f[x])
            return f[x] = find(f[x]);
        return x;
    }
    
    bool same(int x, int y) {return find(x) == find(y);}
    
    bool merge(int x, int y) 
    {
        x = find(x);
        y = find(y);
        if (x == y) 
            return false;
        siz[x] += siz[y];
        f[y] = x;
        return true;
    }
    
    int size(int x) {return siz[find(x)];}
};

void solve()
{
    int n, cnt = 1;
    cin >> n;
    DSU dsu(n);
    map<int, int> change;
    for (int i=0;i<n;i++)
    {
        int a, b;
        cin >> a >> b;
        if (change[a] == 0) change[a] = cnt ++;
        if (change[b] == 0) change[b] = cnt ++;
        dsu.merge(change[a], change[b]);
    }

    int mx = ll_MIN;
    for (int i=1;i<=n;i++)
        mx = max(mx, dsu.size(dsu.find(i)));
    cout << mx << _endl;
}
```

## [å°çº¢çš„çº¦æ•°](https://ac.nowcoder.com/acm/problem/274963)ã€æ•°è®ºï¼ˆé€†å…ƒ+ç®€å•æ•°å­¦æ¨å¯¼ï¼‰ã€‘

#### é¢˜ç›®æè¿°

å¯¹äºä¸€ä¸ªæ­£æ•´æ•°$n$å’Œä¸€ä¸ªéè´Ÿæ•´æ•°$d$ï¼Œå®šä¹‰$f_d(n)$ä¸º$n$çš„æ‰€æœ‰çº¦æ•°çš„$d$æ¬¡æ–¹ä¹‹å’Œã€‚å¦‚$f_3(10) = 1^3 + 2^3 + 5^3 + 10^3$ã€‚  

ç°ç»™å®š$n, d$ï¼Œæ±‚$f_d(n)$çš„å€¼ã€‚ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¾“å‡ºç­”æ¡ˆå¯¹$10^9 + 7$å–æ¨¡çš„ç»“æœã€‚

#### è¾“å…¥æ ¼å¼

ç”±äº$n$å¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥ç»™å‡º$n$çš„è´¨å› æ•°åˆ†è§£å¼ã€‚  
$n = \prod_{i = 1}^w p_i^{a_i}$ 

ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°$w$å’Œä¸€ä¸ªéè´Ÿæ•´æ•°$d$ã€‚  
æ¥ä¸‹æ¥$w$è¡Œï¼Œæ¯è¡Œè¾“å…¥ä¸¤ä¸ªæ­£æ•´æ•°$p_i, a_i$ã€‚  
ä¿è¯$p_i$ä¸ºç´ æ•°ä¸”äº’ä¸ç›¸åŒã€‚  

å¯¹äºå…¨éƒ¨çš„æµ‹è¯•ç‚¹ï¼Œä¿è¯$1 \leq w \leq 10^5, 0 \leq d \leq 10^9, 2 \leq p_i \leq 10^9, 1 \leq a_i \leq 10^9$ã€‚

#### è¾“å‡ºæ ¼å¼

è¾“å‡º$f_d(n)$å¯¹$10^9 + 7$å–æ¨¡çš„ç»“æœã€‚

#### æ ·ä¾‹

```
2 3
2 1
5 1
```

```
1134
```

#### è¯´æ˜

$f_3(10) = 1^3 + 2^3 + 5^3 + 10^3 = 1134$ã€‚

#### æ€è·¯

**å‘ç‚¹è­¦å‘Š** ï¼š å½“$d==0$æ—¶ï¼Œä¸‹å¼ä¸­å„å°é¡¹å‡ä¸º1ï¼Œ ç»“æœå³æ˜¯${\textstyle \prod_{i=1}^{w}(a_i+1)}$ã€‚

ä¾é¢˜æ„ï¼Œæœ‰

$n=p_1^{a1}â‹…p_2^{a2}â‹…p_3^{a3}...p_w^{aw}$

å› æ­¤ï¼Œå¦‚ä¸‹å…¬å¼å±•å¼€å„é¡¹å³ä¸ºnçš„æ‰€æœ‰å› å­

$(1+p_1^1+p_1^2+...+p_1^{a_1})(1+p_2^1+p_2^2+...+p_2^{a_2})...(1+p_w^1+p_w^2+...+p_w^{a_w})$

é¢˜ç›®æ‰€æ±‚ä¸º $f_d(n)$ï¼ˆ$n$çš„æ‰€æœ‰çº¦æ•°çš„$d$æ¬¡æ–¹ä¹‹å’Œï¼‰

å³$[1^d+(p_1^1)^d+(p_1^2)^d+...+(p_1^{a_1})^d][1^d+(p_2^1)^d+(p_2^2)^d+...+(p_2^{a_2})^d][1^d+(p_w^1)^d+(p_w^2)^d+...+(p_w^{a_w})^d]$

å¯¹äºæ¯ä¸ªä¸­æ‹¬å·çš„ä¸€é¡¹ï¼Œé€šè¿‡ç­‰æ¯”æ•°åˆ—å…¬å¼åŠ é€†å…ƒç®—å‡ºï¼Œå°†å„ä¸ªä¸­æ‹¬å·ç»“æœç›¸ä¹˜å³æ˜¯ç­”æ¡ˆã€‚

ä»¤$q=p_i^{d}$ï¼Œ åˆ™æœ‰ $f_d(n)={\prod_{i=1}^{w}\frac{(1-q^{a_i+1})}{1-q}}={\prod_{i=1}^{w}[(1-q^{a_i+1})\cdot inv(1-q)]}$

#### CODE

```cpp
const int MOD = 1e9 + 7;
int qpow(int a, int b)
{
    int tmp = 1;
    a %= MOD;
    while (b)
    {
        if (b & 1)
            tmp = tmp * a % MOD;
        a = a * a % MOD;
        b >>= 1;
    }
    return tmp;
}
int inv(int x) { return qpow(x, MOD - 2);}

void solve()
{
    int w, d, ans = 1;
    cin >> w >> d;
    
    auto cal = [&](int p, int a) -> int
    {
        int q = qpow(p, d);
        return (qpow(q, a + 1) - 1) * inv(q - 1) % MOD;
    };

    for (int i=1;i<=w;i++)
    {
        int p, a;
        cin >> p >> a;
        ans = ans * (d ? cal(p, a) : a + 1) % MOD;
    }
    cout << ans;
}
```

## [å˜¤å˜¤ä¸æƒ³æ±‚å¼‚æˆ–å–µ](https://ac.nowcoder.com/acm/problem/275631)ã€æ‰¾è§„å¾‹+å¼‚æˆ–æ³•åˆ™ã€‘

#### é¢˜ç›®æè¿°

å˜¤å˜¤æœ‰ä¸¤ä¸ªæ•´æ•°$l,r$ï¼Œå¥¹æƒ³çŸ¥é“åŒºé—´$[l,r]$æ‰€æœ‰æ•´æ•°çš„å¼‚æˆ–å’Œæ˜¯å¤šå°‘å–µ~ã€‚

#### è¾“å…¥æ ¼å¼

ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°$T(1 \leq T \leq 2 \times 10^5)$ï¼Œè¡¨ç¤ºè¯¢é—®æ¬¡æ•°ã€‚  

æ¥ä¸‹æ¥Tè¡Œï¼Œæ¯è¡Œè¾“å…¥ä¸¤ä¸ªæ­£æ•´æ•°$l,r(1 \leq l \leq r \leq 10^{18})$è¡¨ç¤ºè¯¢é—®ã€‚

#### è¾“å‡ºæ ¼å¼

å¯¹äºæ¯ä¸ªè¯¢é—®ï¼Œåœ¨ä¸€è¡Œä¸­è¾“å‡ºä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚

#### æ ·ä¾‹

```
3
1 1
1 2
1 3
```

```
1
3
0
```

#### æ€è·¯

ç”±äºå¼‚æˆ–çš„æ€§è´¨(åŒä¸€ä¸ªæ•°å¼‚æˆ–ä¸¤æ¬¡ä¸º0)

å› æ­¤$l\oplus (l+1)\oplus (l+2)\oplusÂ·Â·Â·r = [1\oplus 2\oplus 3Â·Â·Â·(l-1)][1\oplus 2\oplus 3Â·Â·Â·r]$

ç”±æ­¤ï¼Œé—®é¢˜è½¬åŒ–ä¸ºäº†æ±‚1åˆ°xçš„å¼‚æˆ–å’Œã€‚

é€šè¿‡æ‰“è¡¨å¯è§‚å¯Ÿåˆ°ï¼ˆç¬¬iè¡Œè¡¨ç¤ºxorSum(1,i)ï¼‰: å¼‚æˆ–å’Œå››é¡¹ä¸ºä¸€ä¸ªå¾ªç¯ï¼Œåˆ†åˆ«æ˜¯1, x + 1, 0, x

```
 1
 3
 0
 4
 1
 7
 0
 8
 1
11
 0
12
 1
15
 0
16
 1
19
 0
20
 1
23
 0
24
 1
27
 0
28
 1
31
 0
32
 1
35
 0
36
 1
39
 0
40
 1
43
 0
44
 1
47
 0
48
```

#### CODE

```cpp
void solve()
{
    int l, r;
    cin >> l >> r;
    
    auto xorSum = [&](int r) -> int
    {
        array<int, 4> a = {r, 1, r + 1, 0};
        return a[r % 4];
    };

    cout << (xorSum(l - 1) ^ xorSum(r)) << _endl;
}
```

## [åŒºé—´æƒå€¼](https://ac.nowcoder.com/acm/problem/19798)ã€å‰ç¼€å’Œ+æ‰¾è§„å¾‹+åŒæŒ‡é’ˆã€‘

#### é¢˜ç›®æè¿°

å° Bo æœ‰ $n$ ä¸ªæ­£æ•´æ•° $a_1...a_n$ ï¼Œä»¥åŠä¸€ä¸ªæƒå€¼åºåˆ— $w_1...w_n$ ï¼Œç°åœ¨ä»–å®šä¹‰$f(l,r)=(\sum_{i=l}^{r}a_i)\times w_{r-l+1}$ 
ç°åœ¨ä»–æƒ³çŸ¥é“$\sum_{l=1}^{n}\sum_{r=l}^{n}f(l,r)$çš„å€¼ï¼Œéœ€è¦ä½ æ¥å¸®å¸®ä»–  
ä½ åªéœ€è¦è¾“å‡ºç­”æ¡ˆå¯¹ $10^9+7$ å–æ¨¡åçš„å€¼

#### è¾“å…¥æ ¼å¼

ç¬¬ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•° $n$  
ç¬¬äºŒè¡Œ $n$ ä¸ªæ­£æ•´æ•° $a_1...a_n$  
ç¬¬ä¸‰è¡Œ $n$ ä¸ªæ­£æ•´æ•° $w_1...w_n$ 

#### è¾“å‡ºæ ¼å¼

å¯¹äºæ¯ä¸ªè¯¢é—®ï¼Œåœ¨ä¸€è¡Œä¸­è¾“å‡ºä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚

#### æ ·ä¾‹

```
3
1 1 1
1 1 1
```

```
10
```

#### æ€è·¯

$\sum_{i=l}^{r}a_i$è¡¨ç¤ºè¿ç»­ï¼ˆr - l + 1 = kï¼‰é¡¹ï¼Œ è¦æ±‚$\sum_{l=1}^{n}\sum_{r=l}^{n}f(l,r)$ï¼Œå¯ä»¥å‘ç°ï¼Œ

å½“ k = 1 or k = n æ—¶, æ•°ç»„ a æ¯ä¸€é¡¹å‡åªè¢«è®¡ç®—äº†ä¸€æ¬¡

å½“ k = 2 or k = n - 1 æ—¶, æ•°ç»„ a é™¤äº†a[1] å’Œ a[n], å…¶ä½™é¡¹åˆè¢«å¤šè®¡ç®—äº†ä¸€æ¬¡

å½“ k = 3 or k = n - 2 æ—¶, æ•°ç»„ a é™¤äº†a[1] ã€ a[2] å’Œ a[n - 1]ã€ a[n], å…¶ä½™é¡¹åˆè¢«å¤šè®¡ç®—äº†ä¸€æ¬¡

å› æ­¤ï¼Œåˆ©ç”¨åŒæŒ‡é’ˆï¼Œæ¯æ¬¡å¤šåŠ æŒ‡é’ˆåŒ…å«åŒºé—´çš„å’Œï¼Œä¹˜ä»¥ä¸¤è¾¹çš„æƒå€¼ã€‚

#### CODE

```cpp
const int MOD = 1e9 + 7;

void solve()
{
    int n;  cin >> n;
    vector<int> a(n + 1), w(n + 1), pre(n + 1, 0);
    for (int i=1;i<=n;i++)
    {
        cin >> a[i];
        pre[i] = (pre[i - 1] + a[i]) % MOD;
    }
    for (int i=1;i<=n;i++)  cin >> w[i];

    int l = 1, r = n, ans = 0, cur = 0;
    while (l <= r)
    {
        cur = (cur + pre[r] - pre[l - 1] + MOD) % MOD;
        ans = (ans + cur * w[l] % MOD) % MOD;
        if (l != r)
            ans = (ans + cur * w[r] % MOD) % MOD;
        l ++, r --;
    }
    cout << ans;
}
```

## [Final Boss](https://codeforces.com/problemset/problem/1985/F)ã€äºŒåˆ†/set/ä¼˜å…ˆé˜Ÿåˆ—ã€‘

#### é¢˜é¢æè¿°

ä½ æ­£åœ¨é¢å¯¹ä½ æœ€å–œæ¬¢çš„æ¸¸æˆä¸­çš„æœ€ç»ˆ  BOSSã€‚æ•Œäººçš„ç”Ÿå‘½å€¼æ˜¯$h$ã€‚ä½ çš„è§’è‰²æœ‰$n$æ”»å‡»ã€‚ç¬¬ i æ¬¡æ”»å‡»ä¼šå¯¹ BOSS é€ æˆ$a_i$ä¼¤å®³ï¼Œä½†å†·å´æ—¶é—´ä¸º$c_i$ä¸ªå›åˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ å½“å‰çš„å›åˆä¸º$x$ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡å¯ä»¥ä½¿ç”¨è¯¥æ”»å‡»çš„æ—¶é—´ä¸º$x + c_i$ä¸ªå›åˆã€‚ æ¯ä¸ªå›åˆï¼Œä½ éƒ½å¯ä»¥ä¸€æ¬¡æ€§ä½¿ç”¨å½“å‰æœªå†·å´çš„æ‰€æœ‰æ”»å‡»ã€‚å¦‚æœæ‰€æœ‰æ”»å‡»éƒ½å¤„äºå†·å´çŠ¶æ€ï¼Œåˆ™æœ¬å›åˆä»€ä¹ˆä¹Ÿä¸åšï¼Œè·³åˆ°ä¸‹ä¸€å›åˆã€‚

æœ€åˆï¼Œæ‰€æœ‰æ”»å‡»éƒ½ä¸åœ¨å†·å´æ—¶é—´å†…ã€‚è¦èŠ±å¤šå°‘å›åˆæ‰èƒ½æ‰“è´¥ BOSSï¼Ÿå½“ BOSS çš„ç”Ÿå‘½å€¼ä¸º$0$æˆ–æ›´ä½æ—¶ï¼Œå®ƒå°±è¢«æ‰“è´¥äº†ã€‚

#### è¾“å…¥æ ¼å¼

ç¬¬ä¸€è¡ŒåŒ…å« $t$($1 \leq t \leq 10^4$) - æµ‹è¯•ç”¨ä¾‹çš„æ•°é‡ã€‚

æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°$h$å’Œ$n$($1 \leq h, n \leq 2 \cdot 10^5$) - BOSS çš„è¡€é‡å’Œä½ çš„æ”»å‡»æ¬¡æ•°ã€‚

æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„ç¬¬$2$è¡ŒåŒ…å« $n$ æ•´æ•°$a_1, a_2, ..., a_n$($1 \leq a_i \leq 2 \cdot 10^5$) - ä½ çš„æ”»å‡»ä¼¤å®³ã€‚

æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„ç¬¬$3$è¡ŒåŒ…å« $n$ ä¸ªæ•´æ•°$c_1, c_2, ..., c_n$($1 \leq c_i \leq 2 \cdot 10^5$) - ä½ çš„æ”»å‡»å†·å´æ—¶é—´ã€‚

ä¿è¯æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¸­çš„$h$å’Œ$n$ä¹‹å’Œä¸è¶…è¿‡$2 \cdot 10^5$.

#### è¾“å‡ºæ ¼å¼

å¯¹äºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œå³å‡»è´¥ BOSS æ‰€éœ€çš„æœ€å°‘å›åˆæ•°ã€‚

#### æ ·ä¾‹

```
8
3 2
2 1
2 1
5 2
2 1
2 1
50 3
5 6 7
5 6 7
50 3
2 2 2
3 3 3
90000 2
200000 200000
1 1
100000 1
1
200000
6 7
3 2 3 2 3 1 2
6 5 9 5 10 7 7
21 6
1 1 1 1 1 1
5 5 8 10 7 6
```

```
1
3
15
25
1
19999800001
1
21
```

#### æç¤º

å¯¹äºç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œä½ å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªå›åˆä½¿ç”¨æ”»å‡»1å’Œ2ï¼Œæ€»å…±é€ æˆ3ç‚¹ä¼¤å®³ï¼Œä»è€Œå‡»è´¥Bossã€‚

å¯¹äºç¬¬äºŒä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œä½ å¯ä»¥åœ¨3å›åˆå†…æ‰“è´¥Bossï¼Œä½¿ç”¨ä»¥ä¸‹æ”»å‡»æ–¹å¼ï¼š

ç¬¬1å›åˆï¼šä½¿ç”¨æ”»å‡»1å’Œ2ï¼Œå¯¹Bossé€ æˆ3ç‚¹ä¼¤å®³ã€‚Bosså‰©ä½™2ç‚¹ç”Ÿå‘½å€¼ã€‚

ç¬¬2å›åˆï¼šä½¿ç”¨æ”»å‡»2ï¼Œå¯¹Bossé€ æˆ1ç‚¹ä¼¤å®³ã€‚Bosså‰©ä½™1ç‚¹ç”Ÿå‘½å€¼ã€‚

ç¬¬3å›åˆï¼šä½¿ç”¨æ”»å‡»1ï¼Œå¯¹Bossé€ æˆ2ç‚¹ä¼¤å®³ã€‚Bosså‰©ä½™âˆ’1ç‚¹ç”Ÿå‘½å€¼ã€‚ç”±äºå…¶ç”Ÿå‘½å€¼å°äºæˆ–ç­‰äº0ï¼Œä½ å‡»è´¥äº†Bossã€‚

å¯¹äºç¬¬å…­ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼šè®°å¾—ä½¿ç”¨64ä½æ•´æ•°ï¼Œå› ä¸ºç­”æ¡ˆå¯èƒ½ä¼šå¾ˆå¤§ã€‚

#### æ€è·¯

**æ ‡å‡†çš„æ¬¡æ¬¡åšï¼Œæ¬¡æ¬¡é”™ã€æ— å¥ˆâ€¦ğŸ˜”ã€‘**

**æ³•ä¸€ï¼šã€äºŒåˆ†ç­”æ¡ˆã€‘**

äºŒåˆ†æ‰“è´¥BOSSæ‰€éœ€è½®æ•°ï¼Œå¯¹äºæ¯æ¬¡çš„checkï¼Œåˆ¤æ–­æ¯ä¸ªæŠ€èƒ½èƒ½å¤Ÿä½¿ç”¨å¤šå°‘æ¬¡ï¼Œä¼¤å®³ç´¯åŠ ï¼Œè‹¥æ˜¯è¶…è¿‡BOSSçš„hpï¼Œåˆ™å½“å‰è½®æ•°å¯è¡Œã€‚

**ï¼ï¼ éœ€æ³¨æ„çš„æ˜¯ï¼šä¼¤å®³å€¼éå¸¸å¤§ ä¸” äºŒåˆ†åˆå§‹å€¼å¾ˆå¤§ æ—¶å€™ï¼Œ å¤šä¸ªæŠ€èƒ½çš„ä¼¤å®³æ€»å’Œå¯èƒ½è¶…è¿‡ long long çš„èŒƒå›´ï¼Œå› æ­¤éœ€è¦åœ¨éå†æŠ€èƒ½è¿‡ç¨‹ä¸­åˆ¤æ–­å½“å‰æ•Œäººhp æ˜¯å¦å·²ç»å°äºç­‰äº0ï¼Œ å³ BOSS å·²æ­»ã€‚ ï¼ï¼**

**æ³•äºŒï¼šã€ä¼˜å…ˆé˜Ÿåˆ—ã€‘**

ç”¨ä¼˜å…ˆé˜Ÿåˆ—pairè£…æ¯ä¸ªæŠ€èƒ½çš„ç¼–å·å’Œä¸‹æ¬¡å¯ä½¿ç”¨çš„ç¬¬xè½®ã€‚

é¦–å…ˆï¼Œå°†æ‰€æœ‰èŠ‚èƒ½æŠ€èƒ½å…¨éƒ½æ”¾åœ¨ä¼˜å…ˆé˜Ÿåˆ—é‡Œé¢ï¼Œæ­¤æ—¶è®¾ç½®çš„ä¸‹æ¬¡å¯ä½¿ç”¨çš„ç¬¬xè½®ä¸º1ã€‚

åªè¦ BOSS hp > 0, ä»ä¼˜å…ˆé˜Ÿåˆ—é¡¶ç«¯å–å‡ºæŠ€èƒ½ï¼ŒBOSS å—ä¼¤ï¼Œè¡€é‡é™ä½ï¼Œå°†è¯¥æŠ€èƒ½é‡æ–°æ”¾å›ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ›´æ–°ä¸‹æ¬¡å¯ä½¿ç”¨æ—¶é—´ä¸º å½“å‰æ—¶é—´+å†·å´æ—¶é—´ã€‚

#### CODE

```cpp
void solve()	// äºŒåˆ†ç­”æ¡ˆ
{
    int h, n;
    cin >> h >> n;
	vector<int> a(n), c(n);
    for (int i=0;i<n;i++)   cin >> a[i];
    for (int i=0;i<n;i++)   cin >> c[i];
    int l = 1, r = 1e13, mid;
    
    auto check = [&](int x) -> bool
    {
        int hp = h;
        for (int i=0;i<n;i++)
        {
            if (hp / a[i] < (x + c[i] - 1) / c[i])
                return true;
            hp -= (x + c[i] - 1) / c[i] * a[i];
            if (hp <= 0)
                return true;
        }
        return hp <= 0;
    };
    
    while (l < r)
    {
        mid = (l + r) >> 1;
        cerr << mid << _endl;
        if (check(mid))
            r = mid;
        else
            l = mid + 1;
    }
    cout << l << _endl;
}
```

```cpp
void solve()	// ä¼˜å…ˆé˜Ÿåˆ—
{
    int hp, n;
    cin >> hp >> n;
    vector<int> a(n), c(n);
    for (auto &x : a)   cin >> x;
    for (auto &x : c)   cin >> x;
    auto cmp = [](const pair<int, int>& a, const pair<int, int>& b) {return a.first > b.first;};
    priority_queue<pair<int, int>, vector<pair<int, int>>, decltype(cmp)> q(cmp);
    for (int i=0;i<n;i++)
        q.push({1, i});

    int cur = 0;
    while (hp > 0)
    {
        auto [t, id] = q.top(); q.pop();
        cur = t;
        hp -= a[id];
        q.push({cur + c[id], id});
    }
    cout << cur << _endl;
}
```

## [Chords](https://atcoder.jp/contests/abc338/tasks/abc338_e?lang=en)ã€åŒ–æ›²ä¸ºç›´+æ‹¬å·åŒ¹é…ï¼ˆæ ˆï¼‰ã€‘

#### é¢˜é¢æè¿°

æœ‰$2n$ä¸ªç‚¹ç­‰è·ç¦»åœ°åˆ†å¸ƒåœ¨ä¸€ä¸ªåœ†ä¸Šï¼Œä»ä¸€ä¸ªç‚¹å¼€å§‹é¡ºæ—¶é’ˆä»¥$1$åˆ°$2n$ç¼–å·ã€‚  

ç°åœ¨æœ‰$n$æ¡å¼¦ï¼Œç¬¬ $i$ æ¡å¼¦è¿æ¥ç‚¹$a_i$å’Œ$b_i$ï¼Œä¿è¯æ‰€æœ‰$a_1,\cdots,a_n,b_1,\cdots,b_n$ä¸åŒã€‚  


åˆ¤æ–­å¼¦ä¹‹é—´æ˜¯å¦æœ‰äº¤ç‚¹ã€‚

#### è¾“å…¥æ ¼å¼

è¾“å…¥ä»¥ä»¥ä¸‹æ ¼å¼ä»æ ‡å‡†è¾“å…¥ç»™å‡ºï¼š

> $N$
>
> $A_1\quad B_1$
>
>  $A_2\quad B_2$
>
> $\vdots$
>
>  $A_N\quad B_N$

#### è¾“å‡ºæ ¼å¼

å¦‚æœå¼¦ä¹‹é—´æœ‰äº¤ç‚¹ï¼Œåˆ™æ‰“å°`Yes`ï¼›å¦åˆ™æ‰“å°`No`ã€‚

#### æ ·ä¾‹

#1

```
3
1 3
4 2
5 6
```

```
Yes
```

å¦‚å›¾æ‰€ç¤ºï¼Œå¼¦1ï¼ˆè¿æ¥ç‚¹1å’Œ3çš„çº¿æ®µï¼‰å’Œå¼¦2ï¼ˆè¿æ¥ç‚¹4å’Œ2çš„çº¿æ®µï¼‰ç›¸äº¤ï¼Œå› æ­¤æ‰“å°`Yes`ã€‚

<img src="https://img.atcoder.jp/abc338/de1d9dd6cf38caec1c69fe035bdba545.png" width="200px" />

#2

```
3
6 1
4 3
2 5
```

```
No
```

å¦‚å›¾æ‰€ç¤ºï¼Œå¼¦ä¹‹é—´æ²¡æœ‰äº¤ç‚¹ï¼Œå› æ­¤æ‰“å°`No`ã€‚

<img src="https://img.atcoder.jp/abc338/1b3b982c8d6ca59f00ca0edd218fb9c4.png" width="200px" />

#3

```
4
2 4
3 7
8 6
5 1
```

```
Yes
```

#### æç¤º

- $2\leq\ N\ \leq\ 2\times\ 10^5$
- $1\leq\ A_i,B_i\ \leq\ 2N$
- $A_1,\dots,A_N,B_1,\dots,B_N$éƒ½æ˜¯ä¸åŒçš„
- æ‰€æœ‰è¾“å…¥å€¼å‡ä¸ºæ•´æ•°

#### æ€è·¯

å°†ç¯æ‹‰æˆç›´çº¿ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨åŒºé—´ç›¸äº¤ã€‚ï¼ˆåˆ©ç”¨æ ˆï¼‰

#### CODE

```cpp
void solve()
{
    int n;  cin >> n;
    map<int, int> mmap;
    for (int i=0;i<n;i++)
    {
        int a, b;
        cin >> a >> b;
        mmap[a] = b, mmap[b] = a;
    }
    stack<int> st;
    for (int i=1;i<=2*n;i++)
        if (st.empty() || st.top() != mmap[i])  st.push(i);
        else    st.pop();
    cout << (st.empty() ? "No" : "Yes");
}
```

## [å°æ˜æ‰“è”ç›Ÿ](https://ac.nowcoder.com/acm/problem/14553)ã€è´ªå¿ƒ/èƒŒåŒ…ã€‘

#### é¢˜ç›®æè¿°

å°æ˜å¾ˆå–œæ¬¢æ‰“æ¸¸æˆï¼Œç°åœ¨å·²çŸ¥ä¸€ä¸ªæ–°è‹±é›„å³å°†æ¨å‡ºï¼Œä»–åŒæ ·æ‹¥æœ‰å››ä¸ªæŠ€èƒ½ï¼Œå…¶ä¸­ä¸‰ä¸ªå°æŠ€èƒ½çš„é‡Šæ”¾æ—¶é—´å’Œå›ºå®šçš„ä¼¤å®³å€¼ä¸ºï¼š

1.ä¹Œé¸¦åé£æœº  é‡Šæ”¾æ—¶é—´ï¼šx   å›ºå®šä¼¤å®³å€¼ï¼ša

2.èœ˜è››åƒè€³å±  é‡Šæ”¾æ—¶é—´ï¼šy   å›ºå®šä¼¤å®³å€¼ï¼šb

3.é¥¿ç‹¼å‰è¿›      é‡Šæ”¾æ—¶é—´ï¼šz   å›ºå®šä¼¤å®³å€¼ï¼šc

ä»–è¿˜æœ‰ä¸€ä¸ªå¤§æ‹›ï¼Œå…¶é‡Šæ”¾çš„æ—¶é—´æ˜¯ä¸€ä¸ªåŒºé—´ $[L, R]$ï¼Œå¯ä»¥åœ¨åŒºé—´å†…ä»»æ„æ—¶é—´ç‚¹é‡Šæ”¾å‡ºæŠ€èƒ½ï¼Œå…¶å¦‚æœåœ¨$L+i$æ—¶åˆ»é‡Šæ”¾æŠ€èƒ½ï¼Œå…¶èƒ½å¤Ÿæ‰“å‡ºçš„ä¼¤å®³å€¼ä¸º: $tmp + A * i$

è¿™é‡Œtempå€¼è¡¨ç¤ºæŠ€èƒ½çš„åŸºç¡€ä¼¤å®³ï¼ˆåŒæ—¶ä¹Ÿå°±æ˜¯åœ¨æ—¶åˆ»Lé‡Šæ”¾æŠ€èƒ½çš„ä¼¤å®³å€¼ï¼‰, $A$ æ˜¯ä¸€ä¸ªå¸¸æ•°ã€‚

å°æ˜å¾ˆå–œæ¬¢ç ”ç©¶è¿æ‹›ä½¿å¾—åœ¨æœ‰é™çš„æ—¶é—´å†…æ‰“å‡ºæœ€é«˜çš„ä¼¤å®³ï¼Œç°åœ¨ä»–æƒ³è¦åœ¨ $T$ é•¿åº¦å•ä½æ—¶é—´å†…æ‰“å‡ºæœ€é«˜çš„ä¼¤å®³ï¼Œé—®è¿™ä¸ªæœ€å¤§ä¼¤å®³å€¼ã€‚

#### è¾“å…¥æ ¼å¼

æœ¬é¢˜åŒ…å«å¤šç»„æ•°æ®ã€‚  
è¾“å…¥æ ¼å¼ä¸ºï¼š  
$T$  
$x\quad a$  
$y\quad b$  
$z\quad c$  
$L\quad R\quad temp\quad A$  
æ•°æ®èŒƒå›´ï¼š  
$1\leq T\leq1e5$  
$1\leq x,y,z,L,R\leq T$  
$L\leq R$  
$1\leq a,b,c,temp,A\leq 1e5$

#### è¾“å‡ºæ ¼å¼

è¾“å‡ºåŒ…å«ä¸€è¡Œï¼Œè¾“å‡ºèƒ½å¤Ÿæ‰“å‡ºçš„æœ€é«˜ä¼¤å®³å€¼ã€‚

#### æ€è·¯

ã€**å¤šç»„æ ·ä¾‹ï¼ï¼**ã€‘

ã€ä¼¼ä¹èƒŒåŒ…ä¸æ˜¯æ­£è§£ï¼Ÿï¼ã€‘ï¼Œèµ›æ—¶WAäº†å‡ å‘ï¼Œæœ€åçš„ACç¨‹åºè¿è¡Œæ—¶é•¿æ˜¯1700msã€‚

**æ³•ä¸€ï¼šè´ªå¿ƒ**

å°†æ‰€æœ‰æŠ€èƒ½ï¼ˆåŒ…æ‹¬ä¸åŒè“„åŠ›æ—¶é—´çš„å¤§æ‹›ï¼‰å…¨éƒ½å¡åˆ°ä¸€ä¸ªvectoré‡Œï¼ŒæŒ‰ç…§æŠ€èƒ½çš„æ€§ä»·æ¯”ï¼ˆ$\frac{ä¼¤å®³}{é‡Šæ”¾æ—¶é—´}$ï¼‰ç”±å¤§åˆ°å°æ’åºã€‚

åªè¦æ—¶é—´è¿˜å¤Ÿé‡Šæ”¾å‰é¢çš„æŠ€èƒ½å°±é‡Šæ”¾ï¼Œä¸å¤Ÿäº†å†çœ‹ä¸‹ä¸€ä¸ªæŠ€èƒ½ã€‚

**æ³•äºŒï¼šèƒŒåŒ…**ï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰ï¼ˆä¸æ¨èï¼‰

å°†æ‰€æœ‰æŠ€èƒ½ï¼ˆåŒ…æ‹¬ä¸åŒè“„åŠ›æ—¶é—´çš„å¤§æ‹›ï¼‰å…¨éƒ½å¡åˆ°ä¸€ä¸ªvectorï¼ˆå¯é€‰åˆ—è¡¨ï¼‰ä¸­ï¼Œå®Œå…¨èƒŒåŒ…é€‰æ‹©å‡ºè§„å®štçš„æœ€å¤§æ–¹æ¡ˆã€‚

#### æ ·ä¾‹

```
8
3 1
2 3
1 3
3 3 3 3
```

```
24
```

#### CODE

```cpp
void solve()	// è´ªå¿ƒ
{
    int n;
    int l, r, tmp, a;
    auto cmp = [&](pair<int, int> x, pair<int, int> y) {return (x.second * 1.0 / x.first) > (y.second * 1.0 / y.first);};
    while (cin >> n)
    {
        vector<pair<int, int>> v(3);
        for (auto &x : v)   cin >> x.first >> x.second;
        cin >> l >> r >> tmp >> a;
        for (int i=l;i<=r;i++)
            v.push_back({i, tmp + (a * (i - l))});
        sort(all(v), cmp);

        int hp = 0;
        for (auto [cost, damag] : v)
        {
            int t = n / cost;
            hp += damag * t;
            n %= cost;
        }
        cout << hp << _endl;
    }
}
```

```cpp
void solve()
{
    int n, l, r, tmp, a;
    while (cin >> n)
    {
        vector<pair<int, int>> v(3);
        for (auto &x : v)   cin >> x.first >> x.second;
        cin >> l >> r >> tmp >> a;
        for (int i=l;i<=r;i++)
            v.emplace_back(i, tmp + (a * (i - l)));
        vector<int> dp(n + 1);
        for (auto [cost, damag] : v)
            for (int j=cost;j<=n;j++)
                dp[j] = max(dp[j], dp[j - cost] + damag);
        cout << dp[n] << _endl;
    }
}
```

## Cheering up the Cow Gã€æœ€å°ç”Ÿæˆæ ‘ã€‘

#### é¢˜ç›®æè¿°

çº¦ç¿°æœ‰$N$ä¸ªç‰§åœºï¼Œç¼–å·ä¾æ¬¡ä¸º$1\sim N$ã€‚æ¯ä¸ªç‰§åœºé‡Œä½ç€ä¸€å¤´å¥¶ç‰›ã€‚è¿æ¥è¿™äº›ç‰§åœºçš„æœ‰ $P$ æ¡é“è·¯ï¼Œæ¯æ¡é“è·¯éƒ½æ˜¯åŒå‘çš„ã€‚ç¬¬ $j$ æ¡é“è·¯è¿æ¥çš„æ˜¯ç‰§åœº $S_j$ å’Œ $E_j$ ï¼Œé€šè¡Œéœ€è¦ $L_j$ çš„æ—¶é—´ã€‚ä¸¤ç‰§åœºä¹‹é—´æœ€å¤šåªæœ‰ä¸€æ¡é“è·¯ã€‚çº¦ç¿°æ‰“ç®—åœ¨ä¿æŒå„ç‰§åœºè¿é€šçš„æƒ…å†µä¸‹å»æ‰å°½é‡å¤šçš„é“è·¯ã€‚

çº¦ç¿°çŸ¥é“ï¼Œåœ¨é“è·¯è¢«å¼ºæ‹†åï¼Œå¥¶ç‰›ä¼šéå¸¸ä¼¤å¿ƒï¼Œæ‰€ä»¥ä»–è®¡åˆ’æ‹†é™¤é“è·¯ä¹‹åå°±å»å¿½æ‚ å¥¹ä»¬ã€‚çº¦ç¿°å¯ä»¥é€‰æ‹©ä»ä»»æ„ä¸€ä¸ªç‰§åœºå‡ºå‘å¼€å§‹ä»–ç»´ç¨³å·¥ä½œã€‚å½“ä»–èµ°è®¿å®Œæ‰€æœ‰çš„å¥¶ç‰›ä¹‹åï¼Œè¿˜è¦å›åˆ°ä»–çš„å‡ºå‘åœ°ã€‚æ¯æ¬¡è·¯è¿‡ç‰§åœºiçš„æ—¶å€™ï¼Œä»–å¿…é¡»èŠ± $C_i$ çš„æ—¶é—´å’Œå¥¶ç‰›äº¤è°ˆï¼Œå³ä½¿ä¹‹å‰å·²ç»åšè¿‡å·¥ä½œäº†ï¼Œä¹Ÿè¦ç•™ä¸‹æ¥å†è°ˆä¸€æ¬¡ã€‚æ³¨æ„çº¦ç¿°åœ¨å‡ºå‘å’Œå›å»çš„æ—¶å€™ï¼Œéƒ½è¦å’Œå‡ºå‘åœ°çš„å¥¶ç‰›è°ˆä¸€æ¬¡è¯ã€‚è¯·ä½ è®¡ç®—ä¸€ä¸‹ï¼Œçº¦ç¿°è¦æ‹†é™¤å“ªäº›é“è·¯ï¼Œæ‰èƒ½è®©å¿½æ‚ å¥¶ç‰›çš„æ—¶é—´å˜å¾—æœ€å°‘ï¼Ÿ

#### è¾“å…¥æ ¼å¼

\* Line $1$ : Two space-separated integers: $N$ and $P$

\* Lines $2\sim N+1$: Line $i+1$ contains a single integer: $C_i$

\* Lines $N+2\sim N+P+1$: Line $N+j+1$ contains three space-separated integers: $S_j$,  $E_j$, and $L_j$

#### è¾“å‡ºæ ¼å¼

\* Line 1: A single integer, the total time it takes to visit all the cows (including the two visits to the cow in your sleeping-pasture)

#### æ ·ä¾‹

```
5 7 
10 
10 
20 
6 
30 
1 2 5 
2 3 5 
2 4 12 
3 4 17 
2 5 15 
3 5 6 
4 5 12 
```

```
176 
```

#### æ€è·¯

è‹¥åªè€ƒè™‘è¡Œèµ°æ—¶é—´ä½œä¸ºæƒå€¼ï¼Œä¼šå­˜åœ¨æœ‰çš„ç‰›éœ€è¦éå¸¸é•¿çš„æ—¶é—´"å®‰æ…°"ï¼Œæœ€ç»ˆå¾—å‡ºé”™è¯¯ç­”æ¡ˆï¼ˆä»¥è¡Œèµ°æ—¶é—´èµ°æœ€çŸ­è·¯ï¼Œå†dfséå†æ‰€æœ‰ç‚¹ï¼Œå°è¯•æ‰¾æœ€å°å€¼ï¼‰ã€‚

å› æ­¤ï¼Œéœ€è¦**å°†"å®‰æ…°å¥¶ç‰›"å’Œè¡Œèµ°ä¸€èµ·ä½œä¸ºè¾¹çš„æƒå€¼**ï¼ˆå¾€è¿”è¯¥æ¡è¾¹åŠå®‰æ…°è¯¥æ¡è¾¹ä¸¤ç«¯çš„å¥¶ç‰›ï¼‰ï¼Œå¾—åˆ°çš„æœ€å°ç”Ÿæˆæ ‘è¿˜éœ€è¦åŠ ä¸Šæœ€å°çš„å®‰æ…°å¥¶ç‰›æ—¶é—´ï¼ˆä»¥è¯¥ç‚¹ä½œä¸ºèµ·ç‚¹ï¼‰ã€‚

#### CODE

```cpp
struct DSU
{
    vector<int> f, siz;
    
    DSU() {}
    DSU(int n) {init(n);}
    
    void init(int n) 
    {
        f.resize(n + 1);
        iota(f.begin(), f.end(), 0);
        siz.assign(n + 1, 1);
    }
    
    int find(int x) 
    {
        while (x != f[x])
            x = f[x] = f[f[x]];
        return x;
    }
    
    bool same(int x, int y) {return find(x) == find(y);}
    
    bool merge(int x, int y) 
    {
        x = find(x);
        y = find(y);
        if (x == y) 
            return false;
        siz[x] += siz[y];
        f[y] = x;
        return true;
    }
    
    int size(int x) {return siz[find(x)];}
};
struct node
{
    int st, to, len;
    bool operator<(const node y)  const {return len < y.len;}
};

const int N = 1E4 + 10;
bool vis[N];

void solve()
{
    int n, m, mn = ll_MAX - 1;
    cin >> n >> m;
    DSU dsu(n);
    vector<int> time(n + 1);
    vector<node> v;
    vector<vector<pair<int, int>>> adj(n + 1);
    for (int i=1;i<=n;i++)
    {
        cin >> time[i];
        mn = min(time[i], mn);
    }
    for (int i=0;i<m;i++)
    {
        int a, b, c;
        cin >> a >> b >> c;
        v.push_back({a, b, c * 2 + time[a] + time[b]});
    }
    sort(all(v));
    auto Kruskal = [&]() -> int
    {
        int ans = 0, cnt = 0;
        for (int i=0;i<(int)v.size();i++)
        {
            auto cur = v[i];
            if (!dsu.same(cur.st, cur.to))
            {
                cnt ++;
                ans += cur.len;
                dsu.merge(cur.st, cur.to);
                adj[cur.st].push_back({cur.to, cur.len});
                adj[cur.to].push_back({cur.st, cur.len});
            }
        }
        return (cnt == n - 1 ? ans : -1);
    };
    cout << Kruskal() + mn;
}
```

## ã€æœªå®Œå¾…ç»­â€¦ã€‘

#### é¢˜ç›®æè¿°



#### è¾“å…¥æ ¼å¼



#### è¾“å‡ºæ ¼å¼



#### æ ·ä¾‹

```

```

```

```

#### æ€è·¯



#### CODE

```cpp

```

## ã€ã€‘

#### é¢˜ç›®æè¿°



#### è¾“å…¥æ ¼å¼



#### è¾“å‡ºæ ¼å¼



#### æ ·ä¾‹

```

```

```

```

#### æ€è·¯



#### CODE

```cpp

```

## ã€ã€‘

#### é¢˜ç›®æè¿°



#### è¾“å…¥æ ¼å¼



#### è¾“å‡ºæ ¼å¼



#### æ ·ä¾‹

```

```

```

```

#### æ€è·¯



#### CODE

```cpp

```

## ã€ã€‘

#### é¢˜ç›®æè¿°



#### è¾“å…¥æ ¼å¼



#### è¾“å‡ºæ ¼å¼



#### æ ·ä¾‹

```

```

```

```

#### æ€è·¯



#### CODE

```cpp

```

